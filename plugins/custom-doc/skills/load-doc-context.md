---
name: load-doc-context
description: Load documents and incorporate them as session context for seamless workflow continuation
version: 1.0.0
author: yugo-ibuki
keywords:
  - load
  - context
  - documents
  - session
  - worktree
  - continuity
used-by:
  - /create-doc
  - /update-doc
  - /create-investigate-doc
  - /update-investigate-doc
dependencies:
  - search-related-docs (for document discovery)
  - .claude/custom-documents directory
---

# load-doc-context スキル

ドキュメントを読み込んでセッションのコンテキストとして取り込むための内部スキル。

## 目的

検索で特定したドキュメントを：
1. 読み込んで内容を解析
2. 重要な情報を抽出
3. 現在のセッションのコンテキストとして活用

## 読み込みフロー

```
1. 対象ドキュメントのパスを受け取る
2. ディレクトリ内の .md ファイルを列挙
3. 各ファイルの内容を読み込み
4. 構造化されたコンテキストを生成
5. セッションに取り込み
```

## 抽出する情報

### 必須項目

| セクション | 抽出内容 | 用途 |
|------------|----------|------|
| 概要 | 全体の説明 | コンテキストの把握 |
| 変更したファイル | ファイルパス一覧 | 重複チェック、関連性判定 |
| 実装内容 | 具体的な変更点 | 実装の参考 |

### 任意項目（存在すれば抽出）

| セクション | 抽出内容 | 用途 |
|------------|----------|------|
| 技術的な背景・解説 | 技術情報 | 実装判断の参考 |
| 技術的な判断・設計決定 | 設計理由 | 一貫性の維持 |
| 注意点・制約 | 制約事項 | 問題の回避 |
| セキュリティ観点 | セキュリティ対策 | セキュリティ確保 |

## 出力フォーマット

### コンテキストサマリー

```markdown
---
📚 コンテキスト読み込み完了: feature-auth-login
---

## 概要
ログイン機能の実装。JWT認証を使用したセッション管理。

## 過去に変更したファイル
- `src/auth/login.ts` - ログイン処理
- `src/auth/middleware.ts` - 認証ミドルウェア
- `src/auth/types.ts` - 型定義

## 主な実装ポイント
- JWT トークンの生成と検証
- リフレッシュトークンの実装
- セッション有効期限の管理

## 注意点
- トークンの有効期限は環境変数で設定
- リフレッシュトークンはHTTPOnly Cookieに保存

---
💡 このコンテキストを踏まえて作業を継続します
```

## コマンドへの組み込み

### search-related-docs との連携

```markdown
## 関連ドキュメント発見時のフロー

1. `search-related-docs` で関連ドキュメントを検索
2. ユーザーが参照を選択した場合：
   - `load-doc-context` でコンテキストを読み込み
   - サマリーを表示
3. コンテキストを踏まえて作業を継続
```

### create-doc での活用

```markdown
## 新規作成時の参照

関連ドキュメントをコンテキストとして読み込んだ場合：

1. 過去の実装内容との整合性を確認
2. 同じファイルへの変更があれば追記形式を検討
3. 技術的な判断の一貫性を維持
4. 注意点・制約を引き継ぎ
```

### update-doc での活用

```markdown
## 更新時の差分検出

既存ドキュメントを読み込み：

1. 「変更したファイル」セクションから記載済みファイルを抽出
2. 現在の変更ファイルと比較
3. 未記載のファイルのみを追記対象として特定
```

## 読み込みオプション

| オプション | 説明 | デフォルト |
|------------|------|------------|
| full | 全セクションを読み込み | false |
| summary_only | 概要のみ | false |
| files_only | 変更ファイルのみ | false |
| exclude_security | セキュリティ項目を除外 | false |

## エラーハンドリング

### ドキュメントが見つからない場合

```markdown
⚠️ 指定されたドキュメントが見つかりません: feature-xxx

以下を確認してください：
- ディレクトリ名が正しいか
- `.claude/custom-documents/` 配下に存在するか
```

### 読み込みエラーの場合

```markdown
⚠️ ドキュメントの読み込みに失敗しました: feature-auth-login

原因: ファイルが空または破損している可能性があります
対処: 該当ディレクトリの内容を確認してください
```

## 注意事項

- HTMLファイルは読み込み対象外（Markdownのみ）
- 大きなドキュメント（1000行超）は要約して読み込み
- 複数ファイルがある場合は統合して処理
- 読み込んだコンテキストはセッション内でのみ有効
