---
allowed-tools:
  - Bash(git add:*)
  - Bash(git status:*)
  - Bash(git diff:*)
  - Bash(git log:*)
  - Bash(git branch:*)
  - Bash(gh pr:view:*)
  - Bash(mkdir:*)
  - Read
  - Write
  - Edit
  - Glob
  - Bash
description: テンプレートを使ってカスタムドキュメントを作成
argument-hint: <ディレクトリ名>
---

## 参照スキル

- `skills/search-related-docs/SKILL.md` - 関連ドキュメント検索
- `skills/load-doc-context/SKILL.md` - コンテキスト読み込み

## 実行フロー

### Step 1: 関連ドキュメント検索

調査レポート作成前に、関連する既存ドキュメントを検索：

1. 調査対象のキーワードやファイルパスを特定
2. `.claude/custom-documents/` 内の既存ドキュメントを走査
3. 同じ領域を調査した過去のドキュメントを検出
4. 関連ドキュメントがあれば提示：

```
📚 関連する調査ドキュメントが見つかりました：

1. **auth-system-investigation** (関連度: 高)
   - 調査対象: 認証システム
   - 作成日: 2024-11-15

このドキュメントを参照しますか？
- (y) 参照しながら新規調査レポートを作成
- (n) 参照せずに新規作成
- (u) 既存ドキュメントを更新
```

### Step 2: コンテキスト読み込み（参照選択時）

ユーザーが参照を選択した場合：
- `skills/load-doc-context.md` に従って既存調査ドキュメントを読み込み
- 過去の調査結果との整合性を意識して新規レポートを作成
- 重複した内容は避け、新しい発見に焦点を当てる

### Step 3: 調査レポート作成

## 実行内容

コードベースの調査結果をまとめた調査レポートを `.claude/custom-documents` 配下に作成してください。

### ディレクトリ命名規則
- **名前の指定がない場合**: 調査対象のコンポーネントやモジュール名から自動生成（例: `auth-system-investigation`, `api-flow-analysis`）
- **名前の指定がある場合**: 指定された名前に従う

### ファイル構成
- 可能な限り1つのMarkdownファイルにまとめる
- 複雑な調査の場合は必要に応じて複数ファイルに分割
- 各ドキュメントと同階層に読みやすいHTMLファイルも生成（`python plugins/custom-doc/scripts/markdown-to-html.py`を使用）

## root

現在のプロジェクト配下

## 目的

**新規参入者がコードベースを理解するための調査レポート作成**

このコマンドは以下の目的で使用します：

1. **実装の現状把握**: 既存コードの実装内容を体系的に調査・記録
2. **理解の促進**: 新しいチームメンバーがコードを理解するための手引き作成
3. **ナレッジ共有**: コード調査で発見した重要な知見を文書化
4. **オンボーディング支援**: プロジェクトへの参入障壁を下げるための資料提供

## 構造

調査レポートは以下の構造で作成してください：

### 1. 調査概要 (Investigation Overview)
- **調査対象**: どのコンポーネント/モジュール/機能を調査したか
- **調査日時**: いつ調査を実施したか
- **調査動機**: なぜこの調査を行ったか（例: 新機能追加、バグ修正、理解促進）
- **重要度**: この部分がシステム全体でどれだけ重要か

### 2. 実装の構造 (Implementation Structure)
- **ファイル構成**: 関連するファイルとディレクトリの一覧
- **主要なクラス/関数**: コアとなるコンポーネントの説明
- **依存関係**: 他のモジュールやライブラリとの依存関係マップ
- **データフロー**: データがどのように流れるか（図解推奨）

### 3. コードの動作 (How It Works)
- **処理フロー**: ステップバイステップで処理の流れを説明
- **重要なロジック**: 理解すべき核心的なロジックの解説
- **状態管理**: データや状態がどのように管理されているか
- **エラーハンドリング**: エラー処理の仕組み

### 4. 発見事項 (Findings)
- **設計パターン**: 使用されているデザインパターン
- **技術的な選択理由**: なぜこの実装方法が選ばれたか（推測含む）
- **注意点**: コードを触る際に気をつけるべきポイント
- **潜在的な問題**: バグやリファクタリング候補

### 5. コード例 (Code Examples)
- **重要なコードスニペット**: 理解の鍵となるコード片を引用
- **使用例**: 実際の使い方のサンプル
- **テストコード**: 関連するテストがあれば記載

### 6. 参考情報 (References)
- **関連ファイル**: `src/components/auth/login.ts:45-67`のような具体的な参照
- **関連ドキュメント**: READMEや他のドキュメントへのリンク
- **外部リソース**: 使用しているライブラリの公式ドキュメントなど

### 7. 次のステップ (Next Steps)
- **さらに調査が必要な箇所**: 未調査の領域
- **改善提案**: リファクタリングや改善のアイデア
- **質問リスト**: 元の開発者に確認したい事項


